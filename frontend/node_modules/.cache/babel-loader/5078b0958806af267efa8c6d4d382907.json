{"ast":null,"code":"var _jsxFileName = \"/home/marta/Dokumenty/DYPLOM/copper_shop_template/src/components/shop/basket/basket_step_3/BasketStep3.js\";\nimport React, { Component } from 'react';\nimport \"./_basket_step_3.scss\";\nimport BasketTableProducts from \"../basket_table/basket_table_products/BasketTableProducts\";\nimport BasketTableSummary from \"../basket_table/basket_table_summary/BasketTableSummary\";\nimport { Link } from \"react-router-dom\";\n\nclass BasketStep3 extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      products: []\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault(); //products update\n\n      const {\n        products\n      } = this.state;\n      const {\n        setBasketStep,\n        basketStep,\n        basket,\n        login,\n        deliveryDetails,\n        currentDeliveryType,\n        currentDelivery,\n        totalSum\n      } = this.props;\n      let newProductsList = [...products];\n      let putError = false;\n      let changeId = [];\n      let i = 0;\n\n      for (; i < basket.length;) {\n        for (let j = 0; j < products.length; j++) {\n          if (products[j].id === basket[i].product.id) {\n            changeId.push(products[j].id);\n            newProductsList[j].quantity = (+products[j].quantity - +basket[i].amount).toString();\n          }\n        }\n\n        i++;\n      }\n\n      if (i >= basket.length) {\n        const url = \"http://localhost:3000/products/\";\n\n        for (let j = 0; j < newProductsList.length; j++) {\n          for (let k = 0; k < changeId.length; k++) {\n            if (newProductsList[j].id === changeId[k]) {\n              fetch(url + newProductsList[j].id, {\n                headers: {\n                  \"Content-Type\": \"application/json\"\n                },\n                method: 'PUT',\n                dataType: \"json\",\n                body: JSON.stringify(newProductsList[j])\n              }).then(resp => {\n                if (!resp.ok) {\n                  throw new Error(\"something is wrong...\");\n                }\n              }).catch(err => console.error(err));\n              putError = true;\n            }\n          }\n        }\n\n        if (!putError) {\n          setBasketStep(basketStep + 1);\n          this.props.basketSetClear(); //order save\n\n          const url = \"http://localhost:3014/orders\";\n          let today = new Date();\n          let date = today.getDate() + '-' + (today.getMonth() + 1) + '-' + today.getFullYear();\n          let address = deliveryDetails;\n          let delivery = currentDeliveryType;\n          let deliveryCost = currentDelivery;\n          fetch(url, {\n            headers: {\n              \"Content-Type\": \"application/json\"\n            },\n            method: 'POST',\n            dataType: \"json\",\n            body: JSON.stringify({\n              login,\n              date,\n              basket,\n              address,\n              delivery,\n              deliveryCost,\n              totalSum\n            })\n          }).then(resp => {\n            if (!resp.ok) {\n              throw new Error(\"something is wrong...\");\n            } else {\n              console.log(resp);\n            }\n          }).catch(err => console.error(err));\n        }\n      }\n    };\n  }\n\n  componentDidMount() {\n    const url = \"http://localhost:3000/products\";\n    fetch(url).then(response => {\n      return response.json();\n    }).then(products => {\n      this.setState({\n        products: products\n      });\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }\n\n  render() {\n    const {\n      basket,\n      basketSum,\n      currentDelivery,\n      totalSum,\n      priceDisplay,\n      basketStep,\n      handleGoBack,\n      deliveryDetails,\n      currentDeliveryType,\n      login\n    } = this.props;\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"section\", {\n      className: \"basket-step-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container basket-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(BasketTableProducts, {\n      basketStep: basketStep,\n      basket: basket,\n      priceDisplay: priceDisplay,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"basket-step-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"section\", {\n      className: \"basket-step-3-details\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"section\", {\n      className: \"basket-step-3-details-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 37\n      }\n    }, \"Adres dostawy:\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 37\n      }\n    }, deliveryDetails.name, \"\\xA0\", deliveryDetails.surname), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 37\n      }\n    }, deliveryDetails.address), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 37\n      }\n    }, deliveryDetails.zipCode, \"\\xA0\", deliveryDetails.city), /*#__PURE__*/React.createElement(\"section\", {\n      className: \"basket-step-3-details-content-delivery\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 41\n      }\n    }, \"Spos\\xF3b dostawy:\\xA0\"), /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 41\n      }\n    }, currentDeliveryType))), /*#__PURE__*/React.createElement(\"section\", {\n      className: \"basket-step-3-details-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 37\n      }\n    }, \"Dane kontaktowe:\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 37\n      }\n    }, \"email:\\xA0\", deliveryDetails.email), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 37\n      }\n    }, \"telefon:\\xA0\", deliveryDetails.phone))), /*#__PURE__*/React.createElement(BasketTableSummary, {\n      basketSum: basketSum,\n      currentDelivery: currentDelivery,\n      totalSum: totalSum,\n      priceDisplay: priceDisplay,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(\"section\", {\n      className: \"basket-step-btns\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn\",\n      onClick: handleGoBack,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 29\n      }\n    }, \"Wstecz\"), login ? /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn confirm-btn\",\n      onClick: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 33\n      }\n    }, \"Potwierdzam\") : /*#__PURE__*/React.createElement(Link, {\n      className: \"btn confirm-btn\",\n      to: \"/login\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 33\n      }\n    }, \"Potwierdzam\")))));\n  }\n\n}\n\nexport default BasketStep3;","map":{"version":3,"sources":["/home/marta/Dokumenty/DYPLOM/copper_shop_template/src/components/shop/basket/basket_step_3/BasketStep3.js"],"names":["React","Component","BasketTableProducts","BasketTableSummary","Link","BasketStep3","state","products","handleSubmit","e","preventDefault","setBasketStep","basketStep","basket","login","deliveryDetails","currentDeliveryType","currentDelivery","totalSum","props","newProductsList","putError","changeId","i","length","j","id","product","push","quantity","amount","toString","url","k","fetch","headers","method","dataType","body","JSON","stringify","then","resp","ok","Error","catch","err","console","error","basketSetClear","today","Date","date","getDate","getMonth","getFullYear","address","delivery","deliveryCost","log","componentDidMount","response","json","setState","render","basketSum","priceDisplay","handleGoBack","name","surname","zipCode","city","email","phone"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport \"./_basket_step_3.scss\"\nimport BasketTableProducts from \"../basket_table/basket_table_products/BasketTableProducts\";\nimport BasketTableSummary from \"../basket_table/basket_table_summary/BasketTableSummary\";\nimport {Link} from \"react-router-dom\";\n\nclass BasketStep3 extends Component\n{\n    state = {\n        products: [],\n    };\n\n    componentDidMount() {\n\n        const url = \"http://localhost:3000/products\";\n\n        fetch(url)\n        .then(response => {\n            return response.json()\n        })\n        .then(products =>\n        {\n            this.setState({\n                products: products\n            });\n        })\n        .catch(function(error) {\n            console.log(error);\n        });\n    };\n\n    handleSubmit = (e) =>\n    {\n        e.preventDefault();\n\n//products update\n\n        const {products} = this.state;\n        const {setBasketStep, basketStep, basket, login, deliveryDetails, currentDeliveryType, currentDelivery, totalSum} = this.props;\n\n        let newProductsList = [...products]\n        let putError = false;\n        let changeId = [];\n\n        let i = 0;\n        for (; i < basket.length;) {\n\n            for (let j = 0; j < products.length; j++) {\n\n                if(products[j].id === basket[i].product.id)\n                {\n                    changeId.push(products[j].id)\n                    newProductsList[j].quantity = (+products[j].quantity - +basket[i].amount).toString();\n                }\n            }\n            i++;\n        }\n\n        if(i >= basket.length)\n        {\n            const url = \"http://localhost:3000/products/\";\n\n            for (let j = 0; j < newProductsList.length; j++)\n            {\n                for (let k = 0; k < changeId.length; k++)\n                {\n                    if(newProductsList[j].id === changeId[k])\n                    {\n                        fetch(url + newProductsList[j].id,\n                            {\n                                headers: {\"Content-Type\": \"application/json\"},\n                                method: 'PUT',\n                                dataType: \"json\",\n                                body: JSON.stringify(newProductsList[j]),\n                            })\n                        .then(resp =>{\n                            if (!resp.ok) {\n                                throw new Error(\"something is wrong...\");\n                            }\n                        })\n                        .catch(err => console.error(err));\n                        putError = true;\n                    }\n                }\n            }\n\n            if(!putError)\n            {\n                setBasketStep(basketStep + 1);\n                this.props.basketSetClear();\n\n        //order save\n\n                const url = \"http://localhost:3014/orders\";\n\n                let today = new Date();\n                let date = today.getDate()+'-'+(today.getMonth()+1)+'-'+today.getFullYear();\n                let address = deliveryDetails;\n                let delivery = currentDeliveryType\n                let deliveryCost = currentDelivery\n\n                fetch(url,\n                    {\n                        headers: {\"Content-Type\": \"application/json\"},\n                        method: 'POST',\n                        dataType: \"json\",\n                        body: JSON.stringify({login, date, basket, address, delivery, deliveryCost, totalSum}),\n                    })\n                .then(resp =>{\n                    if (!resp.ok) {\n                        throw new Error(\"something is wrong...\");\n                    }\n                    else\n                    {\n                        console.log(resp);\n                    }\n                })\n                .catch(err => console.error(err));\n\n            }\n        }\n\n\n\n\n\n\n    };\n\n    render() {\n        const {basket, basketSum, currentDelivery, totalSum, priceDisplay, basketStep, handleGoBack, deliveryDetails,\n            currentDeliveryType,login} = this.props;\n        return (\n            <>\n                <section className=\"basket-step-3\">\n                    <div className=\"container basket-container\">\n                        <BasketTableProducts\n                            basketStep={basketStep}\n                            basket={basket}\n                            priceDisplay={priceDisplay}/>\n                        <div className=\"basket-step-content\">\n                            <section className=\"basket-step-3-details\">\n                                <section className=\"basket-step-3-details-content\">\n                                    <h4>\n                                        Adres dostawy:\n                                    </h4>\n                                    <p>{deliveryDetails.name}&nbsp;{deliveryDetails.surname}</p>\n                                    <p>{deliveryDetails.address}</p>\n                                    <p>{deliveryDetails.zipCode}&nbsp;{deliveryDetails.city}</p>\n                                    <section className=\"basket-step-3-details-content-delivery\">\n                                        <h4>\n                                            Spos√≥b dostawy:&nbsp;\n                                        </h4>\n                                        <span>{currentDeliveryType}</span>\n                                    </section>\n                                </section>\n                                <section className=\"basket-step-3-details-content\">\n                                    <h4>\n                                        Dane kontaktowe:\n                                    </h4>\n                                    <p>email:&nbsp;{deliveryDetails.email}</p>\n                                    <p>telefon:&nbsp;{deliveryDetails.phone}</p>\n                                </section>\n\n                            </section>\n                            <BasketTableSummary\n                                basketSum={basketSum}\n                                currentDelivery={currentDelivery}\n                                totalSum={totalSum}\n                                priceDisplay={priceDisplay}/>\n                        </div>\n\n                        <section className=\"basket-step-btns\">\n                            <button className=\"btn\" onClick={handleGoBack}>\n                                Wstecz\n                            </button>\n\n                            {login ?\n                                <button className=\"btn confirm-btn\" onClick={this.handleSubmit} >\n                                    Potwierdzam\n                                </button>:\n                                <Link className=\"btn confirm-btn\" to=\"/login\">Potwierdzam</Link>\n                            }\n                        </section>\n                    </div>\n                </section>\n            </>\n        )\n    }\n}\n\nexport default BasketStep3;"]},"metadata":{},"sourceType":"module"}